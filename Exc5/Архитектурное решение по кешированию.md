Мотивация

* Кеширование редко меняющихся данных снижает нагрузку на бэкенд и улучшает отзывчивость интерфейса (статику не нужно повторно грузить по сети, используется локальный кэш)
* Снижение нагрузки на БД
* Увеличение скорости ответа бэкенда (дашборд операторов)

Предлагаемое решение

Можно настроить CDN поверх s3-хранилища для ускорения загрузки статики, но лучше сосредоточиться на скорости загрузки информации по заказам, т.к. операторы уже подсветили эту проблему.

Важно иметь согласованные данные, т.к. операторам нужна самая актуальная информация по заказам, поэтому будем использовать read-/write-through подход при формировании кэшей. Кэши необходимо прогревать, чтобы не получилось, что первый оператор платил своим временем, ожидая ответ системы.


```
@startuml

title Чтение и обновление заказа

actor op as "Operator"

participant ui as "CRM UI"
participant api as "CRM API"
participant cache as "Redis"
participant db as "shopDB"

== Обновление заказа ==

op -> ui : request update order

ui -> api: update order by id

api -> cache : updateOrder(orderId)

cache -> db : updateOrder(orderId)

db -> cache : order data

cache -> cache : upsert cache

cache -> api : order data

api -> ui : order data

ui -> op : response with updated order



== Детали заказа ==

op -> ui: request order data

ui -> api: get order data

api -> cache: getOrder(orderId)

cache -> api: order data [cache hit]

api -> ui 

ui -> op

cache -> db: getOrder(orderId)

db -> cache: order data

cache -> cache: insert cache

cache -> api: order data 

@enduml
```