Мотивация

* Грамотная утилизация системных ресурсов. Поиск мест, где их не хватает, либо они простаивают без дела.
* Упреждающее выявление проблем в системе (место на диске обычно заканчивается внезапно)
* Осознанное планирование бюджета на инфраструктуру, т.к. есть текущий профиль нагрузки и прогнозируемое изменение.
* data driven development - можно ставить задачи на разработку в зависимости от состояния системы в целом, никто не оценит неработающую систему, но с новой фичей.
* Без данных о сторонних пользователях API сложно принимать бизнес решения.

Выбор подхода к мониторингу

Для мониторинга веб-сервисов (MES API, CRM API, shop API) используем подход RED, т.к. эти показатели сильно влияют на конечных пользователей:

* Кол-во 5хх ошибок
* Response time
* RPS
* Number of simultanious sessions

Для мониторинга железа, очередей, s3-хранилища и баз данных используем USE, хотя базы данных используются как сервисы, а значит уже есть необходимый мониторинг из коробки, достаточно настроить для них алертинг, если этого ещё не было сделано (например, место на диске, длительность транзакций, доступность БД на запись). В первую очередь нас интересуют следующие метрики:

* CPU Usage
* Memory Usage
* Disk Usage
* Disk Space Usage


План внедрения метрик

* Развернуть и настроить Prometheus Server для сбора и хранения метрик
* Установка на всех серверах агентов-экспортеров.
* Установка Grafana для визуализации метрик
* Настройка всех необходимых дашбордов (CRM API, shop API, MES API, S3 Storage, Message Queue)